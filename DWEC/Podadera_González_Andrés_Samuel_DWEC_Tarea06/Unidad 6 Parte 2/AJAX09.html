<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Ajax 09. Jquery método post.</title>
    <script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>

    <script>
        // CON LIVSERVER EL POST NO FUNCIONA
        $(function () {
            $("button").click(function () { // Se se pulsa el boton
                var cadena = "";
                $("#cambia").html("<img src='ajax-loader.gif'>"); // Mientras se carga
                // $.post es el método que realiza el get de 
                // ajax. Tiene dos parámetros
                // solicitud -> lo que se solicita.
                // datos_envio -> Los parámetros post que se envian al servidor
                // funcion (datos_devueltos,estado)
                // tipo es el tipo de datos:(pocional ,per da fallos entre verones de navegado
                // xml, html, text
                // script -> devuelve un texto plano, pero ejecuta un script // Tengo que probarlo
                // json, jsonp (es un formato que no vemos en clase)
                // { peli: "todas"} es el parámetro que va por post. Equivale al get "http://pagina/index.php?peli=todas" y de esa forma se puede conectar con el servidor y que este haga la busqueda de todas las películas. 
                $.post("ajaxpelis.json", {peli: "todas" }, function (datos_devueltos, estado) {
                    if (estado == "success") {
                        $("#cambia").html("<br />");

                        for (let i = 0; i < datos_devueltos.length; i++) {
                            $("#cambia").append("Título:" + datos_devueltos[i].titulo + "<br />" + "Genero:" + datos_devueltos[i].genero + "<br />");

                        }

                    }
                    console.log(datos_devueltos);

                }, "json");
            });
        });
    </script>
</head>

<body>

    <button type="button">JQuery Ajax Texto.</button>
    <div id="cambia">
        <h2>Cambia el contenido</h2>
    </div>
</body>

</html>